# MongoDb
- DB -> Collections -> Documents
- Each doc has an id
- Local or hosted in AWS etc.
- GUI for local -> **MongoDb compass**
- MongoEngine => py library for connecting and typecasting to class

## Mongo cluster and Pymongo
- [Mongo DB](mongodb.com)
- Create cluster in free tier and copy connection string for python linking
- Whitelist IP and create password
- pymongo library
    - `from pymongo import MongoClient`
    - `cluster = MongoClient('connection string')`
    - `db = cluster['dbname']`
    - `collection = db['collectionname']`
    - `collection.insert_one(doc)`
    - `collection.find({"key":"value","key1":"regex"})`
- methods are 
    - insert_one, insert_many
    - find (returns cursor obj, iterate thru it), find_one
    - delete_one, delete_many
    - update_one, update_many
    - count_documents 
    - $set, $inc, $max, $push etc. in update available. 
    - update eg 
        - `zipcodes.update( {"_id" : "01001"}, {"$set" : { "pop" : 16769}})`

## Querying using find
- find takes 2 arguments (query, project )
    - more like where and select
- Regex and range arguments like $lt, $gt used, $or used
    - `zipcodes.find({ '$or' : [ {'city': 'PALMER' }, {'state': 'MA'}]})`
    - `zipcodes.find({'pop' : { '$lt':8, '$gt':5}})`

- cursor object returned
    - iterator like structure. Keep using iter.next() till the exception comes
    - also in for loop
    - functions in library to print cursor object also available

- find_one finds first or only one? are there ordered docs?
    - doc order by _id 
    

## [Official docs for clear study](https://pymongo.readthedocs.io/en/stable/tutorial.html)
- BSON
    - 



## Explore more: 

- _id in doc (create or random  - which is better)
    - **first field of autogenerated _id is the timestamp for earlier documents identification**
- capped collections
    -Capped collections are fixed-size collections ie. *when we create the collection, we must fix the maximum size of the collection(in bytes)* and the *maximum number of documents that it can store*. After creation, if we try to add more than documents to their capacity, it overwrites the existing documents.
